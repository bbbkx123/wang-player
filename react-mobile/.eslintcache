[{"D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\index.tsx":"1","D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\App.tsx":"2","D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\layouts\\index.tsx":"3","D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\store\\index.ts":"4","D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\views\\recommend\\index.tsx":"5","D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\views\\PlayPage\\index.tsx":"6","D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\utils\\hook.ts":"7","D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\service\\index.tsx":"8","D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\components\\Player\\index.tsx":"9","D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\components\\ProgressBar\\index.tsx":"10","D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\service\\http.ts":"11","D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\utils\\tools.ts":"12","D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\service\\config.ts":"13","D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\store\\actions.ts":"14","D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\views\\Recommend\\index.tsx":"15","D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\views\\PlayListDetails\\index.tsx":"16","D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\components\\List\\index.tsx":"17","D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\components\\List\\define.ts":"18","D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\components\\Slider\\index.tsx":"19"},{"size":270,"mtime":1618542653660,"results":"20","hashOfConfig":"21"},{"size":259,"mtime":1618542653598,"results":"22","hashOfConfig":"21"},{"size":1460,"mtime":1618995976124,"results":"23","hashOfConfig":"21"},{"size":2175,"mtime":1618556934152,"results":"24","hashOfConfig":"21"},{"size":455,"mtime":1615165785179,"results":"25","hashOfConfig":"21"},{"size":4931,"mtime":1618988928859,"results":"26","hashOfConfig":"21"},{"size":990,"mtime":1615165785175,"results":"27","hashOfConfig":"21"},{"size":946,"mtime":1618557705410,"results":"28","hashOfConfig":"21"},{"size":2993,"mtime":1618554768417,"results":"29","hashOfConfig":"21"},{"size":4563,"mtime":1618555327296,"results":"30","hashOfConfig":"21"},{"size":864,"mtime":1615165785173,"results":"31","hashOfConfig":"21"},{"size":2156,"mtime":1618989432563,"results":"32","hashOfConfig":"21"},{"size":127,"mtime":1615165785173,"results":"33","hashOfConfig":"21"},{"size":448,"mtime":1618542653663,"results":"34","hashOfConfig":"21"},{"size":2873,"mtime":1618993229292,"results":"35","hashOfConfig":"21"},{"size":3765,"mtime":1618996044197,"results":"36","hashOfConfig":"21"},{"size":3179,"mtime":1618984779099,"results":"37","hashOfConfig":"21"},{"size":457,"mtime":1618902608552,"results":"38","hashOfConfig":"21"},{"size":2854,"mtime":1618994109634,"results":"39","hashOfConfig":"21"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},"4mpgx7",{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"51","usedDeprecatedRules":"52"},{"filePath":"53","messages":"54","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"55","usedDeprecatedRules":"42"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"58","usedDeprecatedRules":"42"},{"filePath":"59","messages":"60","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"61","messages":"62","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"63","usedDeprecatedRules":"42"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"66","usedDeprecatedRules":"42"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"71","usedDeprecatedRules":"42"},{"filePath":"72","messages":"73","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"74","usedDeprecatedRules":"42"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"79","messages":"80","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"81","messages":"82","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"83","usedDeprecatedRules":"42"},{"filePath":"84","messages":"85","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\index.tsx",[],["88","89"],"D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\App.tsx",[],"D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\layouts\\index.tsx",["90","91"],"D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\store\\index.ts",[],"D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\views\\recommend\\index.tsx",["92","93","94","95","96"],"import {useState} from 'react'\r\n// import {Route} from 'react-router-dom'\r\nimport {TabBar} from 'antd-mobile'\r\n\r\nconst Route1 = () => {\r\n  return (\r\n    <div>Route1</div>\r\n  )\r\n}\r\n\r\nconst Route2 = () => {\r\n  return (\r\n    <div>Route2</div>\r\n  )\r\n}\r\n\r\nconst TAB = ['FIRST', 'SECOND']\r\n\r\nconst Recommend = () => {\r\n  const [selectedTab, setSelectedTab] = useState<String>(TAB[0])\r\n  return (\r\n    <div>\r\n     \r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Recommend",["97","98"],"D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\views\\PlayPage\\index.tsx",["99","100","101","102"],"import { useState, useEffect, useContext, useRef } from \"react\";\r\n\r\nimport ProgressBar from \"@/components/ProgressBar\";\r\nimport { StoreContext } from \"@/store\";\r\nimport { songPlayAction } from \"@/store/actions\";\r\n\r\n\r\nimport {\r\n  formatForPlayTime,\r\n} from \"@/utils/tools\";\r\nimport { useWatch } from \"@/utils/hook\";\r\n\r\nimport Player from \"@/components/Player\";\r\n\r\nimport \"./index.less\";\r\n\r\nconst PlayPage = () => {\r\n  const audioRef = useRef<any>(null);\r\n  const playRef = useRef<any>(null);\r\n  const { dispatch, EventEmitter } = useContext<any>(StoreContext);\r\n  const {\r\n    currentSongIndex,\r\n    playListDetail,\r\n    duration,\r\n    volume,\r\n    audioSrc,\r\n  } = useContext<any>(StoreContext);\r\n  const [percent, setPercent] = useState<number>(0);\r\n  const [currentTime, setCurrentTime] = useState<number>(0);\r\n  const [progressWidth, setProgressWidth] = useState<number>(0);\r\n  // const [loop, setLoop] = useState<boolean>(false)\r\n  const eventsName = EventEmitter.eventNames();\r\n\r\n  \r\n\r\n  // progress事件订阅\r\n  useEffect(() => {\r\n    if (!eventsName.includes(\"progress-changing\")) {\r\n      EventEmitter.addListener(\r\n        \"progress-changing\",\r\n        (percent: number) => {\r\n          setPercent(percent);\r\n        },\r\n        { passive: false }\r\n      );\r\n    }\r\n    return () => {\r\n      EventEmitter.removeAllListeners([\"progress-changing\"]);\r\n    };\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    EventEmitter.addListener(\r\n      \"progress-change\",\r\n      (percent: number) => {\r\n        setPercent(percent);\r\n        audioRef.current.currentTime = duration * percent;\r\n      },\r\n      { passive: false }\r\n    );\r\n\r\n    return () => {\r\n      EventEmitter.removeAllListeners([\"progress-change\"]);\r\n    };\r\n  }, [duration]);\r\n\r\n  /**\r\n   * 问题: 在useEffect(()=>{}, [])中, timeupdate回调中无法读取 currentTime 和 duration, 暂时使用useEffect来更新percent\r\n   * 解决: 独立使用useEffect, useEffect(()=>{}, [currentTime, duration])可以获取到\r\n   */\r\n  useEffect(() => {\r\n    EventEmitter.addListener(\"timeupdate\", (payload: any) => {\r\n      const { currentTime } = payload;\r\n      setCurrentTime(currentTime);\r\n      setPercent(currentTime / duration);\r\n      // console.log(duration, currentTime);\r\n    });\r\n\r\n    return () => {\r\n      EventEmitter.removeAllListeners([\"timeupdate\"]);\r\n    };\r\n  }, [duration]);\r\n\r\n  useEffect(() => {\r\n    if (playRef.current && playRef.current.clientWidth) {\r\n      setProgressWidth(playRef.current.clientWidth - 70);\r\n    }\r\n  }, []);\r\n\r\n  useWatch(playListDetail, (prev) => {\r\n    if (prev && prev.detailId === playListDetail.detailId) return;\r\n    const initIndex = 0;\r\n    handlePlay(initIndex);\r\n  });\r\n\r\n  // 初始audio实例\r\n  // 1. 通过audio.current.src直接设置无效, 在标签中设置src可以生效 src={xxx}\r\n  // 2. chrome66以及更高的版本不允许媒体自动播放, 76前可以通过设置  chrome://flags/#autoplay-policy 设置 autoplay-policy 为  “No user gesture is required”\r\n  //  77需要通过查看网站信息 设置允许声音\r\n\r\n  const togglePlay = () => {\r\n    audioRef.current.paused\r\n      ? audioRef.current.play()\r\n      : audioRef.current.pause();\r\n  };\r\n\r\n  const handleNextSong = () => {\r\n    if (!audioRef.current || !audioRef.current.src) return;\r\n    handlePlay(\r\n      playListDetail.listData.lentgh <= currentSongIndex\r\n        ? 0\r\n        : currentSongIndex + 1\r\n    );\r\n  };\r\n\r\n  const handlePrevSong = () => {\r\n    if (!audioRef.current || !audioRef.current.src) return;\r\n    handlePlay(\r\n      currentSongIndex === 0\r\n        ? playListDetail.listData.length - 1\r\n        : currentSongIndex - 1\r\n    );\r\n  };\r\n\r\n  const handlePlay = (songIndex: number) => {\r\n    dispatch(songPlayAction(songIndex));\r\n  };\r\n\r\n  const togglePlayStatusClass = () => {\r\n    return audioRef.current && audioRef.current.paused ? 'iconstart' : 'iconpause-circle'\r\n  }\r\n\r\n  return (\r\n    <div ref={playRef} className=\"play\">\r\n      <div className=\"play--poster\">play</div>\r\n      <div className=\"play--progress\">\r\n        <span className=\"time left\">{formatForPlayTime(currentTime)}</span>\r\n        <ProgressBar\r\n          percent={percent}\r\n          progressWidth={progressWidth}\r\n        ></ProgressBar>\r\n        <span className=\"time right\">{formatForPlayTime(duration)}</span>\r\n      </div>\r\n      <div className=\"play--control\">\r\n        <div\r\n          style={{ fontSize: \"32px\" }}\r\n          className=\"iconfont iconprev\"\r\n          onClick={handlePrevSong}\r\n        ></div>\r\n        <div\r\n          style={{ fontSize: \"48px\" }}\r\n          className={`iconfont ${togglePlayStatusClass()}`}\r\n          onClick={togglePlay}\r\n        ></div>\r\n        <div\r\n          style={{ fontSize: \"32px\" }}\r\n          className=\"iconfont iconnext\"\r\n          onClick={handleNextSong}\r\n        ></div>\r\n      </div>\r\n      <Player ref={audioRef} songUrl={audioSrc}></Player>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default PlayPage;\r\n","D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\utils\\hook.ts",["103"],"import {useEffect, useRef} from 'react'\r\n\r\ntype CallBack<T> = (prev: T | undefined) => void;\r\ntype Config = { immediate: boolean };\r\n\r\n/**\r\n * useWatch\r\n * @param dep 监听对象\r\n * @param callback\r\n * @param config 监听设置\r\n */\r\n\r\nfunction useWatch<T>(\r\n  dep: T,\r\n  callback: CallBack<T>,\r\n  config: Config = { immediate: false },\r\n) {\r\n  // 监听禁止标志\r\n  const stop = useRef<boolean>(false);\r\n  // 初始化标志\r\n  const inited = useRef<boolean>(false);\r\n  const prev = useRef<T>();\r\n  const { immediate } = config;\r\n\r\n  useEffect(() => {\r\n    if (!stop.current) {\r\n      const execute = () => callback(prev.current);\r\n      // 防止immediate为false时, 首次加载就执行\r\n      if (!inited.current) {\r\n        inited.current = true;\r\n        if (immediate) {\r\n          execute();\r\n        }\r\n      } else {\r\n        execute();\r\n      }\r\n      prev.current = dep;\r\n    }\r\n  }, [dep]);\r\n\r\n  return () => {\r\n    stop.current = true;\r\n  };\r\n}\r\n\r\nexport { useWatch };","D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\service\\index.tsx",[],"D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\components\\Player\\index.tsx",["104","105","106","107","108","109","110"],"import {useState, useEffect, useRef, useContext, forwardRef} from 'react'\r\nimport {useWatch} from '@/utils/hook'\r\nimport {PlayerProps} from \"./types\"\r\nimport {StoreContext} from '@/store'\r\n// import { throttle } from '@/utils/tools';\r\n\r\n\r\nconst Player = forwardRef((props: PlayerProps, audioRef: any) => {\r\n  const {dispatch, EventEmitter, playStatus} = useContext<any>(StoreContext)\r\n  const {songUrl} = props\r\n\r\n  // const [currentTime, setCurrentTime] = useState<number>(0)\r\n  // const [isProgressChanging, setIsProgressChanging] = useState<boolean>(false)\r\n  // const [duration, setDuration] = useState<number>(0)\r\n  const [volume, setVolume] = useState<number>(0)\r\n  const [loop, setLoop] = useState<boolean>(false)\r\n  const [autoPlay, setAutoPlay] = useState<boolean>(false)\r\n  const [play, setPlay] = useState(playStatus)\r\n  \r\n\r\n  // const handlePlay = (needPlay: boolean) => {\r\n    // needPlay ? audio.current.play() : audio.current.pause()\r\n    // this.$store.commit('SET_PLAYING', needPlay)\r\n  // }\r\n\r\n  const onEnded = () => {\r\n    audioRef.current.pause()\r\n    // setCurrentTime(0)\r\n    // if (this.currentIndex < this.playlist.length - 1) {\r\n    //     this.songChangeIndex = this.currentIndex + 1\r\n    // } else if (this.currentIndex === this.playlist.length - 1) {\r\n    //     if (this.isLoopPlayList) {\r\n    //         this.songChangeIndex = 0\r\n    //     }\r\n    // }\r\n  }\r\n\r\n  const onTimeUpdate = (e: any) => {\r\n    let currentTime = Number(e.target.currentTime.toFixed(2))\r\n    EventEmitter.emit('timeupdate', {currentTime})\r\n    // if (!isProgressChanging) setCurrentTime(_currentTime)\r\n  }\r\n\r\n  // const _onTimeUpdate = (e: any) => {\r\n  //   throttle(onTimeUpdate, 100, 0)([e])\r\n  // }\r\n\r\n  const onCanPlay = () => {\r\n    // index改变后, 统一由canplay进行set\r\n    \r\n    // setCurrentTime(audio.current.currentTime)\r\n    \r\n    // this.$store.commit('SET_CURRENTINDEX', this.songChangeIndex)\r\n    // this.$store.commit('SET_CURRENTSONG', this.playlist[this.songChangeIndex])\r\n    dispatch({type: \"duration\", value: audioRef.current.duration})\r\n    audioRef.current.play()\r\n  }\r\n\r\n  useWatch(play, (prev) => {\r\n    play ? audioRef.current.play() : audioRef.current.pause()\r\n  })\r\n\r\n\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      \r\n      // setVolume(audioRef.current.volume)\r\n      // setAutoPlay(true)\r\n      // audioRef.current.volume = 0.5\r\n    }, 0)\r\n    // this.isPlay = 'icon-bofang'\r\n  }, [])\r\n\r\n  // 初始audio实例\r\n  // 1. 通过audio.current.src直接设置无效, 在标签中设置src可以生效 src={xxx}\r\n  // 2. chrome66以及更高的版本不允许媒体自动播放, 76前可以通过设置  chrome://flags/#autoplay-policy 设置 autoplay-policy 为  “No user gesture is required” \r\n  //  77需要通过查看网站信息 设置允许声音\r\n\r\n  return (\r\n    <audio ref={audioRef} src={songUrl} autoPlay={true} onEnded={onEnded} onTimeUpdate={onTimeUpdate} onCanPlay={onCanPlay} loop={loop}></audio>\r\n  )\r\n})\r\n\r\nexport default Player","D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\components\\ProgressBar\\index.tsx",["111"],"import { useContext, useEffect, useRef, useState } from \"react\";\r\n\r\nimport { StoreContext } from \"@/store\";\r\nimport { throttle } from \"@/utils/tools\";\r\nimport \"./index.less\";\r\n\r\n// 进度条按钮宽度\r\nconst progressBarWidth = 16;\r\n// mousedown到mopuseup间隔时间, 用于区分click和mouseup, 超过150ms为mouse事件, 否则为click事件\r\nconst refelctTime = 0.1;\r\n\r\n// ! 问题: 全面屏手势滑动会进行翻页, 导致touchmove不能正确调用\r\n// ? 测试发现小米手机浏览器存在原生滑动事件, 导致问题, 在微信中可正常使用\r\n\r\nconst ProgressBar = (props: any) => {\r\n  const { percent, progressWidth } = props;\r\n  const progressBar = useRef<any>(null),\r\n    progress = useRef<any>(null),\r\n    progressBtn = useRef<any>(null);\r\n  const { startTime, dispatch, EventEmitter } = useContext<any>(StoreContext);\r\n  const [touch, setTouch] = useState({\r\n    initiated: false,\r\n    startX: 0,\r\n  });\r\n  const [progressClientWidth, setProgressClientWidth] = useState<number>(0);\r\n  const [barWidth, setBarWidth] = useState<number | null>(null);\r\n\r\n  const progressClick = (e: any) => {\r\n    // 解决mouseup和click重发触发的问题\r\n    let diff = (new Date().getTime() - startTime) / 1000;\r\n    if (diff > refelctTime) return;\r\n    // .getBoundingClientRect()\r\n    const rect = progressBar.current.getBoundingClientRect();\r\n    const offsetWidth = e.touches[0].clientX - rect.left;\r\n    handleOffset(offsetWidth);\r\n    EventEmitter.emit(\"progress-change\", getPrecent());\r\n  };\r\n\r\n  const handleOffset = (offsetWidth: any) => {\r\n    progress.current.style.width = `${offsetWidth}px`;\r\n    progressBtn.current.style.transform = `translate3d(${offsetWidth}px, 0, 0)`;\r\n  };\r\n\r\n  const progressTouchMove = (e: any) => {\r\n    // ?   Math.max(0, this.progressClientWidth + deltaX) -->  0  移动超出左边界\r\n    // ?   Math.max(0, this.progressClientWidth + deltaX) -->  delta  正常移动\r\n    // ?\r\n    // ?   this.barWidth 实际进度条宽度\r\n    // ?   b = Math.max(0, this.progressClientWidth + deltaX)\r\n    // ?   Math.min(a, b)  -->  a 超出右边界\r\n    // ?   Math.min(a, b)  -->  b 正常移动\r\n\r\n    if (!touch.initiated) return;\r\n    const deltaX = e.touches[0].clientX - touch.startX;\r\n    const offsetWidth = Math.min(\r\n      barWidth === null ? 0 : barWidth,\r\n      Math.max(0, progressClientWidth + deltaX)\r\n    );\r\n    handleOffset(offsetWidth);\r\n    EventEmitter.emit(\"progress-changing\", getPrecent());\r\n  };\r\n\r\n  const progressTouchStart = (e: any) => {\r\n    setTouch({\r\n      initiated: true,\r\n      startX: e.touches[0].clientX,\r\n    });\r\n    setProgressClientWidth(progress.current.clientWidth);\r\n    dispatch({ type: \"startTime\", value: new Date().getTime() });\r\n  };\r\n\r\n  // 不进行节流会造成拖动卡顿\r\n  const _progressTouchMove = (e: any) => {\r\n    throttle(progressTouchMove, 200, 0)([e]);\r\n  };\r\n\r\n  const progressTouchEnd = () => {\r\n    // 出现问题: 从$refs获取样式数据会取到更新之前的数据\r\n    // 在move事件上启用节流后, 可以避免使用定时器\r\n    // 先抛出事件, 再将initiated修改为false\r\n    EventEmitter.emit(\"progress-change\", getPrecent());\r\n    setTouch({\r\n      ...touch,\r\n      initiated: false,\r\n    });\r\n  };\r\n\r\n  const getPrecent = () => {\r\n    let num = progress.current.clientWidth / (barWidth === null ? 0 : barWidth)\r\n    return num.toFixed(4);\r\n  };\r\n\r\n  useEffect(() => {\r\n    setTimeout(() => {\r\n      if (progressBar.current) {\r\n        setBarWidth(progressBar.current.clientWidth - progressBarWidth);\r\n      }\r\n    }, 0)\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    // timeupdate事件触发\r\n    if (percent > 0 && !touch.initiated && barWidth !== null) {\r\n      const offsetWidth = percent * barWidth\r\n      handleOffset(offsetWidth);\r\n    }\r\n  }, [percent]);\r\n\r\n  return (\r\n    <div\r\n      className=\"progress-bar__container\"\r\n      ref={progressBar}\r\n      onClick={progressClick}\r\n      style={{width: `${progressWidth}px`}}\r\n    >\r\n      <div\r\n        className=\"progress-bar\"\r\n        onTouchStart={progressTouchStart}\r\n        onTouchMove={_progressTouchMove}\r\n        onTouchEnd={progressTouchEnd}\r\n      >\r\n        <div className=\"progress-bar__background\"></div>\r\n        {/* 进度条 */}\r\n        <div className=\"progress-bar--progress\" ref={progress}></div>\r\n        {/* 当前进度按钮 */}\r\n        <div className=\"progress-bar--btn__wrapper\" ref={progressBtn}>\r\n          <div className=\"progress-bar--btn\"></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProgressBar;\r\n","D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\service\\http.ts",[],"D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\utils\\tools.ts",["112","113","114"],"import {useEffect, useRef} from 'react'\r\n\r\n/**\r\n * 节流\r\n * @param {Function} fn 目标函数 \r\n * @param {Number} wait 间隔时间\r\n * @param {Number} type 模式  0 ---> timestamp , 1 ---> timeout\r\n */\r\nexport function throttle (fn: any, wait: any, type: any) {\r\n  const context = this\r\n  return function (_arguments: any[]) {\r\n    if (type === 0) {\r\n      let newTimestamp = new Date().getTime()\r\n      if (!fn._timestamp) fn._timestamp = 0\r\n      if (newTimestamp - fn._timestamp > wait) {\r\n        fn.call(context, ..._arguments)\r\n        fn._timestamp = newTimestamp\r\n      }\r\n    } else {\r\n      if (!fn._timeout) {\r\n        fn._timeout = setTimeout(() => {\r\n          fn.call(context, ..._arguments)\r\n          fn._timeout = null\r\n          clearTimeout(fn._timeout)\r\n        }, wait)\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\n// 时间格式化\r\nexport const formatForPlayTime = (time: any) => {\r\n  if (time === null || typeof time === 'undefined') return\r\n  if (time === 0) return '00:00'\r\n  let _time = parseFloat(time)\r\n  if (typeof _time !== 'number') return \r\n  let _format = (_time: any) => _time >= 10 ? _time : `0${_time}`\r\n  return _format(Math.floor(_time / 60)) + ':' + _format((_time % 60).toFixed(0))\r\n}\r\n\r\n\r\nexport const formatForPlayListDetail = (data: any) => {\r\n  const { coverImgUrl, name, trackIds, tracks } = data.data.playlist;\r\n  const { avatarUrl, nickname } = data.data.playlist.creator;\r\n  const listData = trackIds.map((item: any) => item.id);\r\n  return {\r\n    avatarUrl,\r\n    nickname,\r\n    name,\r\n    coverImgUrl,\r\n    listData,\r\n  };\r\n}\r\n\r\nexport const formatForSong = (song: any, songId: any) => {\r\n  return {\r\n    name: song.name,\r\n    artist: song.ar,\r\n    album: song.al,\r\n    sid: songId,\r\n  };\r\n}\r\n\r\n// export const getSlot = (slots: any, slot?: any, data?: any) => {\r\n//   if (slot === undefined) slot = 'default'\r\n//   if (!slots || !Reflect.has(slots, slot)) {\r\n//     return null;\r\n//   }\r\n\r\n//   if (typeof slots[slot] !== 'function') {\r\n//     console.error(`${slot} is not a function!`);\r\n//     return null;\r\n//   }\r\n//   const slotFn = slots[slot];\r\n//   if (!slotFn) return null;\r\n//   return slotFn(data);\r\n// }\r\n","D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\service\\config.ts",["115"],"export default {\r\n  baseUrl: process.env.NODE_ENV === \"development\" ? \"http://localhost:3000\" : \"http://106.13.207.132:3000\"\r\n}","D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\store\\actions.ts",[],"D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\views\\Recommend\\index.tsx",["116","117","118","119"],"D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\views\\PlayListDetails\\index.tsx",["120"],"D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\components\\List\\index.tsx",["121"],"import { useState, useEffect, useContext } from \"react\"\r\nimport { formatForPlayTime } from \"@/utils/tools\"\r\n\r\nimport { StoreContext } from \"@/store\"\r\nimport { label } from \"./define\"\r\nimport \"./index.less\"\r\n\r\nconst List = (props: any) => {\r\n  const { data, listType } = props\r\n\r\n  const { EventEmitter, dispatch, currentSongIndex } = useContext<any>(StoreContext)\r\n\r\n  const [listData, setListData] = useState([])\r\n\r\n  const play = (song: any, index: number) => {\r\n    if (listType === \"search\") {\r\n      EventEmitter.$emit(\"song-play\", song)\r\n    } else if (listType === \"details\") {\r\n      // EventEmitter.$emit('song-play-all', {songlist: this.$store.getters.showlist, index})\r\n    }\r\n  }\r\n\r\n  const listRow = (listRow: any) => {\r\n    const artistStr = (artArr: any[]) => {\r\n      let str = artArr.reduce((prev, cur) => prev + cur.name + \",\", \"\")\r\n      return str.substring(0, str.length - 1)\r\n    }\r\n    return label.map((item, i) => {\r\n      return (\r\n        <div className=\"list__row--item\" style={{ width: \"33%\" }} key={`list__row--item-${i}`}>\r\n          {\r\n            item.type === \"artist\" && artistStr(listRow.artist)\r\n          }\r\n          {\r\n            item.type !== \"artist\" && listRow[item.type]\r\n          }\r\n        </div>\r\n      )\r\n    })\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (Array.isArray(data) && data.length > 0) {\r\n      let _data = JSON.parse(JSON.stringify(data))\r\n      _data.forEach((item: any) => {\r\n        // 处理时间格式\r\n        item.duration = formatForPlayTime(item.duration / 1000)\r\n      })\r\n      setListData(_data)\r\n    }\r\n  }, [data])\r\n\r\n  return (\r\n    <div className=\"list--wrapper\">\r\n      {data.length > 0 && (\r\n        <div className=\"list__header\">\r\n          <div className=\"list__header--item\"></div>\r\n          <div className=\"list__header--item\">操作</div>\r\n          {label.map((item, i) => {\r\n            return (\r\n              <div className=\"list__header--item\" style={{ width: item.style.width }} key={`list__header--item-${i}`}>\r\n                {item.name}\r\n              </div>\r\n            )\r\n          })}\r\n        </div>\r\n      )}\r\n\r\n      {listData.map((item: any, index) => {\r\n        return (\r\n          <div onDoubleClick={() => play(item, index)} className={`${index === currentSongIndex ? \"click\" : \"\"} list__row`} key={`list-item-${index}`}>\r\n            <div className=\"list__row--item\">{index + 1}</div>\r\n            <div className=\"list__row--item\">\r\n              <span style={{ display: \"inline-block\" }} className=\"aixin\">\r\n                <i\r\n                  style={{\r\n                    fontSize: \"13px\",\r\n                    color: item.favourite ? \"#e03f40\" : \"#fff\",\r\n                  }}\r\n                  className={`${item.favourite ? \"icon-aixin\" : \"\"} ${!item.favourite ? \"icon-aixin1\" : \"\"} iconfont`}\r\n                ></i>\r\n              </span>\r\n              {/* <span style=\"display:inline-block;\">\r\n                  <i class=\"iconfont icon-xiazai1\" style=\"font-size: 13px;color: rgba(255,255,255,0.3);\"></i>\r\n                </span>  */}\r\n            </div>\r\n            {listRow(item)}\r\n          </div>\r\n        )\r\n      })}\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default List\r\n","D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\components\\List\\define.ts",[],"D:\\wangyufei\\mine\\wang-player\\react-mobile\\src\\components\\Slider\\index.tsx",["122","123"],{"ruleId":"124","replacedBy":"125"},{"ruleId":"126","replacedBy":"127"},{"ruleId":"128","severity":1,"message":"129","line":2,"column":22,"nodeType":"130","messageId":"131","endLine":2,"endColumn":30},{"ruleId":"128","severity":1,"message":"132","line":15,"column":21,"nodeType":"130","messageId":"131","endLine":15,"endColumn":33},{"ruleId":"128","severity":1,"message":"133","line":3,"column":9,"nodeType":"130","messageId":"131","endLine":3,"endColumn":15},{"ruleId":"128","severity":1,"message":"134","line":5,"column":7,"nodeType":"130","messageId":"131","endLine":5,"endColumn":13},{"ruleId":"128","severity":1,"message":"135","line":11,"column":7,"nodeType":"130","messageId":"131","endLine":11,"endColumn":13},{"ruleId":"128","severity":1,"message":"136","line":20,"column":10,"nodeType":"130","messageId":"131","endLine":20,"endColumn":21},{"ruleId":"128","severity":1,"message":"137","line":20,"column":23,"nodeType":"130","messageId":"131","endLine":20,"endColumn":37},{"ruleId":"124","replacedBy":"138"},{"ruleId":"126","replacedBy":"139"},{"ruleId":"128","severity":1,"message":"140","line":25,"column":5,"nodeType":"130","messageId":"131","endLine":25,"endColumn":11},{"ruleId":"141","severity":1,"message":"142","line":50,"column":6,"nodeType":"143","endLine":50,"endColumn":8,"suggestions":"144"},{"ruleId":"141","severity":1,"message":"145","line":65,"column":6,"nodeType":"143","endLine":65,"endColumn":16,"suggestions":"146"},{"ruleId":"141","severity":1,"message":"145","line":82,"column":6,"nodeType":"143","endLine":82,"endColumn":16,"suggestions":"147"},{"ruleId":"141","severity":1,"message":"148","line":39,"column":6,"nodeType":"143","endLine":39,"endColumn":11,"suggestions":"149"},{"ruleId":"128","severity":1,"message":"150","line":1,"column":30,"nodeType":"130","messageId":"131","endLine":1,"endColumn":36},{"ruleId":"128","severity":1,"message":"140","line":15,"column":10,"nodeType":"130","messageId":"131","endLine":15,"endColumn":16},{"ruleId":"128","severity":1,"message":"151","line":15,"column":18,"nodeType":"130","messageId":"131","endLine":15,"endColumn":27},{"ruleId":"128","severity":1,"message":"152","line":16,"column":16,"nodeType":"130","messageId":"131","endLine":16,"endColumn":23},{"ruleId":"128","severity":1,"message":"153","line":17,"column":10,"nodeType":"130","messageId":"131","endLine":17,"endColumn":18},{"ruleId":"128","severity":1,"message":"154","line":17,"column":20,"nodeType":"130","messageId":"131","endLine":17,"endColumn":31},{"ruleId":"128","severity":1,"message":"155","line":18,"column":16,"nodeType":"130","messageId":"131","endLine":18,"endColumn":23},{"ruleId":"141","severity":1,"message":"156","line":107,"column":6,"nodeType":"143","endLine":107,"endColumn":15,"suggestions":"157"},{"ruleId":"128","severity":1,"message":"158","line":1,"column":9,"nodeType":"130","messageId":"131","endLine":1,"endColumn":18},{"ruleId":"128","severity":1,"message":"150","line":1,"column":20,"nodeType":"130","messageId":"131","endLine":1,"endColumn":26},{"ruleId":"128","severity":1,"message":"159","line":43,"column":40,"nodeType":"130","messageId":"131","endLine":43,"endColumn":46},{"ruleId":"160","severity":1,"message":"161","line":1,"column":1,"nodeType":"162","endLine":3,"endColumn":2},{"ruleId":"128","severity":1,"message":"163","line":12,"column":22,"nodeType":"130","messageId":"131","endLine":12,"endColumn":35},{"ruleId":"141","severity":1,"message":"164","line":80,"column":6,"nodeType":"143","endLine":80,"endColumn":17,"suggestions":"165"},{"ruleId":"166","severity":1,"message":"167","line":88,"column":56,"nodeType":"168","messageId":"169","endLine":88,"endColumn":58},{"ruleId":"170","severity":1,"message":"171","line":90,"column":24,"nodeType":"172","endLine":90,"endColumn":96},{"ruleId":"141","severity":1,"message":"173","line":51,"column":6,"nodeType":"143","endLine":51,"endColumn":8,"suggestions":"174"},{"ruleId":"128","severity":1,"message":"175","line":11,"column":25,"nodeType":"130","messageId":"131","endLine":11,"endColumn":33},{"ruleId":"128","severity":1,"message":"176","line":10,"column":25,"nodeType":"130","messageId":"131","endLine":10,"endColumn":33},{"ruleId":"141","severity":1,"message":"177","line":62,"column":6,"nodeType":"143","endLine":62,"endColumn":16,"suggestions":"178"},"no-native-reassign",["179"],"no-negated-in-lhs",["180"],"@typescript-eslint/no-unused-vars","'Redirect' is defined but never used.","Identifier","unusedVar","'setPageTitle' is assigned a value but never used.","'TabBar' is defined but never used.","'Route1' is assigned a value but never used.","'Route2' is assigned a value but never used.","'selectedTab' is assigned a value but never used.","'setSelectedTab' is assigned a value but never used.",["179"],["180"],"'volume' is assigned a value but never used.","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'EventEmitter' and 'eventsName'. Either include them or remove the dependency array.","ArrayExpression",["181"],"React Hook useEffect has a missing dependency: 'EventEmitter'. Either include it or remove the dependency array.",["182"],["183"],"React Hook useEffect has missing dependencies: 'callback' and 'immediate'. Either include them or remove the dependency array. If 'callback' changes too often, find the parent component that defines it and wrap that definition in useCallback.",["184"],"'useRef' is defined but never used.","'setVolume' is assigned a value but never used.","'setLoop' is assigned a value but never used.","'autoPlay' is assigned a value but never used.","'setAutoPlay' is assigned a value but never used.","'setPlay' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'barWidth' and 'touch.initiated'. Either include them or remove the dependency array.",["185"],"'useEffect' is defined but never used.","'tracks' is assigned a value but never used.","import/no-anonymous-default-export","Assign object to a variable before exporting as module default","ExportDefaultDeclaration","'setSliderConf' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'currentIndexOfBanner' and 'handleBannerActive'. Either include them or remove the dependency array.",["186"],"array-callback-return","Array.prototype.map() expects a value to be returned at the end of arrow function.","ArrowFunctionExpression","expectedAtEnd","jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement","React Hook useEffect has a missing dependency: 'getPlayListDetail'. Either include it or remove the dependency array.",["187"],"'dispatch' is assigned a value but never used.","'dispacth' is assigned a value but never used.","React Hook useEffect has missing dependencies: 'SliderInstance', 'initial', and 'setSliderWidth'. Either include them or remove the dependency array.",["188"],"no-global-assign","no-unsafe-negation",{"desc":"189","fix":"190"},{"desc":"191","fix":"192"},{"desc":"191","fix":"193"},{"desc":"194","fix":"195"},{"desc":"196","fix":"197"},{"desc":"198","fix":"199"},{"desc":"200","fix":"201"},{"desc":"202","fix":"203"},"Update the dependencies array to be: [EventEmitter, eventsName]",{"range":"204","text":"205"},"Update the dependencies array to be: [EventEmitter, duration]",{"range":"206","text":"207"},{"range":"208","text":"207"},"Update the dependencies array to be: [callback, dep, immediate]",{"range":"209","text":"210"},"Update the dependencies array to be: [barWidth, percent, touch.initiated]",{"range":"211","text":"212"},"Update the dependencies array to be: [bannerArr, currentIndexOfBanner, handleBannerActive]",{"range":"213","text":"214"},"Update the dependencies array to be: [getPlayListDetail]",{"range":"215","text":"216"},"Update the dependencies array to be: [SliderInstance, children, initial, setSliderWidth]",{"range":"217","text":"218"},[1365,1367],"[EventEmitter, eventsName]",[1711,1721],"[EventEmitter, duration]",[2265,2275],[844,849],"[callback, dep, immediate]",[3430,3439],"[barWidth, percent, touch.initiated]",[2322,2333],"[bannerArr, currentIndexOfBanner, handleBannerActive]",[1659,1661],"[getPlayListDetail]",[2177,2187],"[SliderInstance, children, initial, setSliderWidth]"]